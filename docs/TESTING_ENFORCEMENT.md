# 테스트 강제화 가이드

> ⚠️ **절대 생략 불가**: 이 문서의 내용은 모든 개발 작업에서 반드시 준수해야 합니다.

## 문제점 분석

### 왜 테스트가 생략되었는가?

1. **서버 재시작 누락**
   - 서버 코드 수정 후 서버를 재시작하지 않아 변경사항이 적용되지 않음
   - 테스트 스크립트를 만들었지만 서버가 재시작되지 않아 테스트 실패

2. **부분적 테스트**
   - 테스트 스크립트를 만들었지만 실제로 작동하는지 확인하지 않음
   - 테스트 결과를 확인하지 않고 넘어감

3. **브라우저 테스트 미완료**
   - 브라우저 자동화로 테스트를 시도했지만 완료하지 않음
   - 3D 주사위 조작의 어려움을 이유로 테스트를 중단함

4. **테스트 결과 확인 누락**
   - 테스트를 실행했지만 결과를 확인하지 않음
   - 예상 결과와 실제 결과를 비교하지 않음

## 해결 방안

### 1. 명확한 테스트 프로세스

모든 코드 수정 후 반드시 다음 순서로 진행:

```
1. 코드 수정 완료
   ↓
2. 서버 코드 수정 시 → 서버 재시작 확인
   - `npm run dev` 실행
   - 서버가 정상 실행되는지 확인
   ↓
3. 브라우저에서 직접 테스트
   - 게임 시작 → 스테이지 선택 → 기능 확인
   - 테스트 도구 사용 가능 (개발 모드)
   ↓
4. 테스트 결과 확인
   - 예상 결과와 실제 결과 비교
   - 서버 로그/브라우저 콘솔 확인
   ↓
5. 문제 발견 시
   - 수정 → 2번부터 재시작
   ↓
6. 모든 테스트 통과 확인
   ↓
7. 테스트 결과 사용자에게 보고
   - 테스트 방법 명시
   - 테스트 결과 명시
   - 문제 발견 시 수정 내용과 재테스트 결과 포함
```

### 2. 테스트 도구 활용

개발 모드에서 테스트 도구를 사용하여 간접적으로 테스트:
- 주사위 값 직접 설정
- 빠른 족보 생성
- 골드 수급 테스트 버튼

### 3. 테스트 완료 기준

다음이 모두 확인되어야 테스트 완료:
- ✅ 서버가 정상 실행 중 (서버 코드 수정 시)
- ✅ 브라우저에서 게임이 정상 시작됨
- ✅ 수정된 기능이 예상대로 동작함
- ✅ 관련 기능에 부작용이 없음
- ✅ 오류가 발생하지 않음
- ✅ 예상 결과와 실제 결과가 일치함

### 4. 테스트 결과 보고 형식

테스트 완료 후 반드시 다음 형식으로 보고:

```
## 테스트 완료 보고

### 테스트 방법
- [테스트 방법 설명]

### 테스트 결과
- [예상 결과]
- [실제 결과]
- [일치 여부]

### 확인 사항
- ✅ [확인 항목 1]
- ✅ [확인 항목 2]
- ...

### 문제 발견 시
- 문제: [문제 설명]
- 수정: [수정 내용]
- 재테스트 결과: [재테스트 결과]
```

## 강제화 방법

### 1. 체크리스트 사용

모든 작업 완료 전에 다음 체크리스트를 확인:

- [ ] 코드 수정 완료
- [ ] 서버 코드 수정 시 → 서버 재시작 확인
- [ ] 브라우저에서 직접 테스트 완료
- [ ] 테스트 결과 확인 완료
- [ ] 예상 결과와 실제 결과 일치 확인
- [ ] 테스트 결과 사용자에게 보고

### 2. 작업 완료 전 확인

작업을 "완료"라고 보고하기 전에 반드시 확인:
- 테스트가 실제로 성공했는가?
- 예상 결과와 실제 결과가 일치하는가?
- 서버 로그/브라우저 콘솔에 오류가 없는가?

### 3. 테스트 생략 시 대응

테스트를 생략하고 "완료"라고 보고하면:
- 즉시 테스트를 수행해야 함
- 테스트 결과를 확인해야 함
- 문제 발견 시 수정 후 재테스트해야 함

## 예외 사항

다음 경우에만 테스트를 생략할 수 있음:
- 단순 문서 수정만 하는 경우
- 주석만 추가하는 경우
- 브라우저 테스트가 물리적으로 불가능한 경우 (예: 서버 설정 파일만 수정)

하지만 가능한 모든 경우에 테스트를 수행해야 합니다.

---

**마지막 업데이트**: 2024년 12월 30일
**상태**: 활성 (절대 변경 금지)

