# 개발 원칙 (Development Principles)

> ⚠️ **중요**: 이 문서의 원칙은 절대 변경되지 않으며, 모든 개발 작업에서 반드시 준수해야 합니다.

## 기본 원칙: 브라우저 직접 테스트

### 원칙
**모든 개발이나 버그 수정 후에는 반드시 브라우저에서 직접 해당 동작을 테스트하여 제대로 동작하는지 확인해야 합니다.**

### 적용 시점
- ✅ 새 기능 개발 완료 후
- ✅ 버그 수정 완료 후
- ✅ 코드 리팩토링 후
- ✅ API 수정 후
- ✅ UI/UX 변경 후

### 테스트 프로세스

1. **코드 수정/개발 완료**
   - 코드 작성 및 수정 완료

2. **브라우저에서 직접 테스트**
   - 게임 시작 → 스테이지 선택 → 게임 플레이
   - 수정된 기능/버그 수정 사항 직접 확인
   - 예상대로 동작하는지 검증

3. **문제 발견 시 즉시 수정 후 재테스트**
   - 버그 발견 시 코드 수정
   - 수정 후 다시 브라우저에서 테스트
   - 정상 동작 확인까지 반복

4. **정상 동작 확인 후 완료**
   - 모든 기능이 예상대로 동작하는지 확인
   - 테스트 완료 후 작업 완료 처리

### 테스트 범위

#### 새 기능 추가 시
- 전체 플로우 테스트 (시작 → 게임플레이 → 종료)
- 예외 상황 테스트
- UI/UX 확인

#### 버그 수정 시
- 해당 버그 재현 테스트
- 수정 후 버그 해결 확인
- 관련 기능 회귀 테스트

#### UI 변경 시
- 시각적 확인
- 인터랙션 테스트
- 반응형 동작 확인

#### API 수정 시
- 클라이언트-서버 통신 확인
- 에러 핸들링 확인
- 데이터 동기화 확인

### 테스트 체크리스트

각 개발/수정 작업 후 다음을 확인:

- [ ] 브라우저에서 게임이 정상적으로 시작되는가?
- [ ] 수정된 기능이 예상대로 동작하는가?
- [ ] 관련된 다른 기능에 부작용이 없는가?
- [ ] UI가 올바르게 표시되는가?
- [ ] 에러가 발생하지 않는가?
- [ ] 사용자 경험이 개선되었는가?

### 예외 사항

이 원칙은 다음 경우를 제외하고는 **절대 예외가 없습니다**:
- 브라우저 테스트가 물리적으로 불가능한 경우 (예: 서버 설정 파일만 수정)
- 단순 문서 수정만 하는 경우

하지만 가능한 모든 경우에 브라우저 테스트를 수행해야 합니다.

### 테스트 강제화 방법

**⚠️ 중요**: 모든 코드 수정 후에는 반드시 다음을 수행해야 합니다:

1. **서버 재시작 (서버 코드 수정 시)**
   - 서버 코드를 수정한 경우 반드시 서버 재시작
   - `npm run dev`로 서버 재시작 확인
   - 서버가 정상적으로 실행되는지 확인

2. **코드 수정 완료 후 즉시 브라우저 테스트**
   - 수정된 기능을 직접 플레이하여 확인
   - 예상대로 동작하는지 검증
   - 문제 발견 시 즉시 수정 후 재테스트

3. **테스트 체크리스트 확인**
   - 위의 테스트 체크리스트를 모두 확인
   - 모든 항목이 통과할 때까지 반복

4. **테스트 완료 확인 (절대 생략 불가)**
   - 테스트가 실제로 성공했는지 명시적으로 확인
   - 예상 결과와 실제 결과가 일치하는지 확인
   - 서버 로그/브라우저 콘솔에서 오류가 없는지 확인

5. **테스트 결과 보고**
   - 테스트 완료 후 사용자에게 결과 보고
   - 테스트 방법과 결과를 명시적으로 보고
   - 문제가 발견된 경우 수정 후 재테스트 결과도 보고

**이 원칙을 무시하면 심각한 버그가 프로덕션에 배포될 수 있습니다.**

### 테스트 실패 원인 분석

**왜 테스트가 생략되었는가?**

1. **서버 재시작 누락**
   - 서버 코드 수정 후 서버를 재시작하지 않아 변경사항이 적용되지 않음
   - 해결: 서버 코드 수정 시 항상 서버 재시작 확인

2. **부분적 테스트**
   - 테스트 스크립트를 만들었지만 실제로 작동하는지 확인하지 않음
   - 해결: 테스트가 실제로 성공했는지 명시적으로 확인

3. **브라우저 테스트 미완료**
   - 브라우저 자동화로 테스트를 시도했지만 완료하지 않음
   - 해결: 테스트 도구를 사용하거나 수동으로 완전히 테스트

4. **테스트 결과 확인 누락**
   - 테스트를 실행했지만 결과를 확인하지 않음
   - 해결: 테스트 결과를 명시적으로 확인하고 보고

5. **"완료" 보고의 함정**
   - 코드 수정만 하고 테스트를 생략한 채 "완료"라고 보고
   - 해결: 테스트가 실제로 성공했을 때만 "완료"라고 보고

### 테스트 강제화 메커니즘

**⚠️ 절대 생략 불가: 다음 체크리스트를 반드시 확인**

모든 코드 수정 후 다음을 **순서대로** 확인:

#### 1. 서버 재시작 확인 (서버 코드 수정 시)
- [ ] 서버 코드를 수정했는가?
- [ ] 서버를 재시작했는가? (`npm run dev`)
- [ ] 서버가 정상 실행 중인가? (포트 5000 확인)
- [ ] 서버 로그에 오류가 없는가?

#### 2. 브라우저 테스트 실행
- [ ] 브라우저에서 `http://localhost:5000` 접속했는가?
- [ ] 게임을 시작했는가?
- [ ] 수정된 기능을 직접 사용해봤는가?
- [ ] 예상대로 동작하는가?

#### 3. 테스트 도구 활용 (개발 모드)
- [ ] 테스트 도구(TEST 버튼)를 사용했는가?
- [ ] 빠른 족보 생성으로 테스트했는가?
- [ ] 골드 수급 등 수정된 기능을 확인했는가?

#### 4. 테스트 결과 확인
- [ ] 예상 결과와 실제 결과가 일치하는가?
- [ ] 브라우저 콘솔에 오류가 없는가?
- [ ] 서버 로그에 오류가 없는가?
- [ ] 모든 체크리스트 항목이 통과했는가?

#### 5. 테스트 결과 보고
- [ ] 테스트 방법을 명시했는가?
- [ ] 테스트 결과를 명시했는가?
- [ ] 문제가 발견되었는가? (발견 시 수정 후 재테스트)

**위 체크리스트를 모두 통과하지 않으면 작업을 "완료"라고 보고하지 않습니다.**

### 테스트 강제화 프로세스

**모든 코드 수정 후 반드시 다음 순서로 진행:**

1. ✅ 코드 수정 완료
2. ✅ 서버 코드 수정 시 → 서버 재시작 (`npm run dev`)
   - 서버가 정상 실행 중인지 확인
   - 서버 로그에 오류가 없는지 확인
3. ✅ 브라우저에서 직접 테스트 (게임 시작 → 기능 확인)
   - 개발 모드 테스트 도구 활용 (TEST 버튼)
   - 빠른 족보 생성으로 기능 테스트
   - 수정된 기능을 직접 사용하여 확인
4. ✅ 테스트 결과 확인 (예상 결과와 실제 결과 비교)
   - 브라우저 콘솔 확인 (F12)
   - 서버 로그 확인
   - 예상 결과와 실제 결과가 일치하는지 확인
5. ✅ 문제 발견 시 → 수정 → 2번부터 재시작
   - 버그 발견 시 즉시 수정
   - 수정 후 다시 2번부터 시작
   - 정상 동작 확인까지 반복
6. ✅ 모든 테스트 통과 확인
   - 모든 체크리스트 항목 통과
   - 오류 없음 확인
   - 예상 결과와 실제 결과 일치 확인
7. ✅ 테스트 결과 사용자에게 보고
   - 테스트 방법 명시
   - 테스트 결과 명시
   - 문제 발견 시 수정 내용도 보고

**⚠️ 중요: 이 프로세스를 생략하면 작업을 "완료"라고 보고하지 않습니다.**
**⚠️ 중요: 테스트가 실제로 성공했을 때만 "완료"라고 보고합니다.**
**⚠️ 중요: "코드 수정 완료"와 "테스트 완료"는 별개의 단계입니다.**

---

## 📝 테스트 체크리스트 참조

자세한 테스트 체크리스트는 `docs/TESTING_CHECKLIST.md`를 참조하세요.

**⚠️ 중요**: 모든 코드 수정 후 반드시 테스트 체크리스트를 확인하세요.

---

**마지막 업데이트**: 2024년
**상태**: 활성 (절대 변경 금지)

